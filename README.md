# Cloud File Storage API


Django REST Framework приложение для облачного хранения файлов с системой аутентификации и авторизации.

## Основные возможности
## Backend

### Аутентификация и пользователи
- Кастомная модель пользователя `CustomUser` с дополнительным полем `login`
- Регистрация пользователей с валидацией данных
- Token-based аутентификация
- Удаление пользователей (только для администраторов)

### Управление файлами
- Загрузка файлов с автоматическим определением размера и имени
- Скачивание файлов с обновлением даты последнего скачивания
- Публичные URL для доступа к файлам
- Комментарии к файлам
- Фильтрация файлов по владельцу (для администраторов)

### Система прав доступа
- `IsOwnerOrAdmin` - доступ только владельцу или администратору
- `IsAdmin` - доступ только администраторам
- Защита от удаления собственного аккаунта администратором

### Логирование
- Middleware для логирования всех HTTP запросов
- Запись времени выполнения запросов
- Логирование исключений и ошибок
- Детальная информация о заголовках и параметрах

## Модели данных

### CustomUser
- Наследуется от `AbstractUser`
- Дополнительное поле `login` (уникальное)

### File
- `name` - имя файла
- `size` - размер файла
- `date_uploaded` - дата загрузки
- `date_downloaded` - дата последнего скачивания
- `pub_url` - публичный URL
- `file` - файловое поле
- `comment` - комментарий
- `owner` - владелец файла (ForeignKey на CustomUser)

## API Endpoints

### Файлы
- `GET/POST /files/` - список файлов и загрузка нового
- `GET/PUT/PATCH/DELETE /files/{id}/` - работа с конкретным файлом
- `GET /files/{id}/download/` - скачивание файла
- `GET /files/filter/{owner}/` - фильтрация по владельцу (admin only)

### Пользователи
- `POST /auth/users/` - регистрация пользователя
- `DELETE /auth/users/{id}/` - удаление пользователя (admin only)

## Настройки

### Требования
- Django 5.2.7+
- Django REST Framework
- Djoser для аутентификации
- django-cors-headers для CORS

### Конфигурация
- База данных: PostgreSQL
- Медиафайлы: `/media/`
- CORS
- Аутентификация: Token, Session, Basic

 Frontend для Cloud File Storage

React приложение для управления облачным файловым хранилищем с интерфейсом администратора и пользователя.

Приложение полностью синхронизировано с Django REST API бэкенда:
Использует те же модели данных
Соответствует системе прав доступа
Обрабатывает все возможные HTTP статусы
Предоставляет понятные сообщения об ошибках

## Технологии

- **React** - фреймворк для построения пользовательского интерфейса
- **React Router** - маршрутизация между страницами
- **Redux Toolkit** - управление состоянием приложения
- **Axios** - HTTP клиент для взаимодействия с API
- **CSS Modules** - стилизация компонентов

## Структура проекта

### Основные страницы
- `Login.jsx` - страница входа в систему
- `SignIn.jsx` - страница регистрации
- `Main.jsx` - главная страница пользователя
- `Staff.jsx` - панель администратора

## Система аутентификации

### Защита маршрутов
- Автоматическая проверка аутентификации при загрузке маршрутов
- Редирект неаутентифицированных пользователей на страницу входа
- Редирект аутентифицированных пользователей от гостевых страниц

### Механизм аутентификации
- Token-based аутентификация
- Автоматическое добавление токена в заголовки запросов
- Хранение токена в localStorage

## Управление состоянием (Redux)

## Функциональность

### Для всех пользователей
- **Регистрация** - создание нового аккаунта
- **Вход в систему** - аутентификация пользователя
- **Выход из системы** - завершение сессии

### Для обычных пользователей
- Просмотр списка своих файлов
- Загрузка новых файлов
- Скачивание файлов
- Управление файлами (переименование, удаление)

### Для администраторов
- Просмотр списка всех пользователей
- Просмотр файлов любого пользователя
- Удаление пользователей (кроме собственного аккаунта)
- Статистика по файлам (количество, общий размер)








В эту часть приложения могут войти только пользователи, имеющие признак «администратор» в списке пользователей:
- список пользователей с выводом признака «администратор» и информации, указанной пользователем в форме регистрации (кроме пароля). В списке должна быть возможность удаления пользователей и изменения значения признака «администратор»;
- в списке пользователей также должна отображаться информация об их файловых хранилищах: количество и размер файлов, ссылка для перехода к интерфейсу управления этими файлами.

*3. Интерфейс управления файловым хранилищем.*

- ~~в интерфейсе необходимо отображение списка файлов,~~ загруженных пользователем в хранилище, с основной информацией о них: имя файла, комментарий, размер, дата загрузки, дата последнего скачивания;
- для каждого файла должны быть доступны следующие операции: удаление, переименование, просмотр (в браузере или через загрузку на локальный диск), копирование специальной ссылки на файл для предоставления доступа другим пользователям или использования его в качестве ресурса в веб-приложениях;




1. Настройки приложения, такие как параметры подключения к БД, размещения файлового хранилища и т. п., выделены в коде в отдельный модуль.


1. В проекте созданы все миграции, необходимые для инициализации БД в работоспособное состояние, — создание БД, таблиц, пользователя admin с правами администратора.

1. Все API-вызовы соответствуют семантическим правилам для REST API, для обмена данными между фронтендом и бэкендом используется формат JSON.



8. Блок работы с файловым хранилищем содержит следующие функции (конкретные API-вызовы вам необходимо спроектировать самостоятельно):

- формирование специальной ссылки на файл для использования внешними пользователями;
- скачивание файла через специальную ссылку, используемую внешними пользователями или веб-приложениями.

Общие комментарии к этому блоку:

- для каждого файла в БД должна сохраняться следующая информация: оригинальное имя файла, размер, дата загрузки, последняя дата скачивания, комментарий, путь к файлу в хранилище, специальная ссылка, по которой файл может быть скачан внешним пользователем;
- необходимо, чтобы базовая папка для хранения файлов настраивалась как параметр системы;
- специальная ссылка на файлы должна формироваться в максимально обезличенном виде, т.е. не содержать в себе имени пользователя, информации о его хранилище и оригинальном имени файла;


------

### Правила сдачи работы

1. Опубликуйте все изменения в файлах проекта в публичном(ых) репозитории(ях) на github.com. Убедитесь, что репозитории содержат действительно последние версии со всеми изменениями.
2. Попробуйте самостоятельно с нуля развернуть приложение, следуя инструкции, описанной вами в README.md. Убедитесь, что приложение разворачивается успешно, что оно работоспособно, протестируйте основные функции.
3. Приложите в личном кабинете ссылки на репозиторий(ии) и развёрнутое приложение или укажите, что приложение может быть развёрнуто вами в течение 1 рабочего дня по запросу проверяющего.
4. Отправьте дипломную работу на проверку.
5. В случае возвращения проекта на доработку и устранения замечаний выполните необходимые действия в короткий срок и повторно сдайте работу. Если потребуется что-то уточнить и задать какие-либо вопросы по результатам проверки, свяжитесь с руководителем вашего дипломного проекта.

------

### Критерии оценки

1. Результаты работы должны быть сданы в виде ссылок на публичный(е) репозиторий(и) с кодом на github.com, а также на развёрнутое приложение на reg.ru.

2. В корневой папке репозиториев должны обязательно содержаться файлы README.md с детальным описанием структуры папок и файлов проекта, а также инструкции по его развёртыванию и запуску, достаточно подробные для выполнения специалистом, прошедшим профессиональное обучение.

3. В случае применения дополнительных инструментов, которые не изучались в программе, должны быть приложены ссылки на документацию по их установке и использованию.

4. Если код фронтенда и бэкенда опубликован в раздельных репозиториях, общие инструкции по развёртыванию приложения должны быть описаны в README.MD в репозитории с бэкендом, а в репозитории с фронтендом должны быть инструкции по сборке и подготовке артефактов фронтенда, необходимых для развёртывания.

5. Для минимизации затрат на использование ресурсов платформы reg.ru в период проверки работ допускается развёртывание приложения на reg.ru в момент, согласованный с руководителем диплома, при условии, что такое развёртывание было заранее отработано и не занимает продолжительное время.

6. В сданной работе должен быть полностью реализован соответствующий требованиям функционал из разделов, помеченных как обязательные, и может быть частично или полностью реализован дополнительный функционал.

7. Поскольку профессия fullstack-разработчика предполагает владение всеми технологиями, используемыми при разработке комплексных приложений с пользовательским интерфейсом, оценке подлежит также внешний вид приложения и удобство пользования им. Недостатки, которые ведут к существенным трудностям в работе пользователя с приложением, могут быть основанием для отправки проекта на доработку и устранения замечаний. При этом дипломный руководитель будет исходить из того, что оцениваемое приложение не является коммерческим продуктом для конечного пользователя, его использование предполагается опытными ИТ-специалистами. Рекомендуется, чтобы все элементы интерфейса приложения, которые могут вызвать сложности у такого пользователя, были снабжены явными или всплывающими подсказками, а также описаны в README.md.

8. При проверке развёрнутое приложение должно быть работоспособным в объёме реализованного обязательного функционала.

9. Развёртывание приложения должно повторно осуществляться не его разработчиком по инструкциям, содержащимся в README.md, без использования каких-либо инструментов или зависимостей, не описанных в README.md. Результатом такого развёртывания должно стать работоспособное приложение, реализующее обязательный функционал.